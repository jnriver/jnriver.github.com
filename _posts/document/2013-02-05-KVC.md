---
layout: post
category : document
title : 读文档：Key-Value Coding Programming Guide
tags : [codemaker, 刘老师]
---
{% include JB/setup %}

刘老师一向很鼓励objc下的KVC和KVO这种很具有特点的高级技巧。不过我对这种东西的认识向来是只停留在初级用法上。。所以以学习为目的，今天详细看了官方的[KVO编程向导](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)（[PDF](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/KeyValueCoding.pdf)）。这里做一些笔记。


* KVC可以很大程度上简化代码量

文档中举了例子，在tableview的datasource中，我们可能需要这样写：

	- (id)tableView:(NSTableView *)tableview objectValueForTableColumn:(id)column row:(NSInteger)row
	{
		ChildObject *child = [childrenArray objectAtIndex:row];
		if ([[column identifier] isEqualToString:@"name"]) {
			return [child name];
		}
		if ([[column identifier] isEqualToString:@"age"]) {
			return [child age];
		}
		// And so on.
	}

而如果使用KVC的话就非常简单：

	- (id)tableView:(NSTableView *)tableview objectValueForTableColumn:(id)column row:(NSInteger)row
	{
		ChildObject *child = [childrenArray objectAtIndex:row];
		return [child valueForKey:[column identifier]];
	}

* KVO可以访问对象的三种值：对象的属性，对象间的一对一关系，对象间的一对多关系。	>Key-value coding can be used to access three different types of object values: attributes, to-one relationships,and to-many relationships. 


* getter方法的命名：必须使用ASCII编码，以小写字母开头，方法命中间不能有空格。

* key path是以句点分割的key。通过key path可以穿越多层对象而访问到对象的属性值。
	>A key path is a string of dot separated keys that is used to specify a sequence of object properties to traverse.

* 使用KVC时，如果对象没有key对应的属性值或者getter方法，会返回一个message `valueForUndefinedKey:`。这个message默认会抛出一个`NSUndefinedKeyException`异常。我们可以通过subclass对其进行override。

…
      